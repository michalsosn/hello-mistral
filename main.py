import os
from mistralai import Mistral
import numpy as np
import faiss


def test_agent(client: Mistral) -> None:
    response = client.beta.agents.get(
        agent_id = "ag_019c0bfa7c207020b9dd35ee1e2d7920",
    )
    print('get', response)

    response = client.beta.agents.list(metadata={})
    print(response)


def test_agent_conversation(client: Mistral) -> None:
    response = client.beta.conversations.list(metadata={})
    print('list', response)

    response = client.beta.conversations.start(
        agent_id="ag_019c0bfa7c207020b9dd35ee1e2d7920",
        inputs=[
            {"role": "user", "content": "Hello!"}
        ],
    )
    print('start', response)

    conversation_id = response.conversation_id
    response = client.beta.conversations.append(
        conversation_id=conversation_id,
        inputs=[
            {"role": "user", "content": "Sorry. Could you repeat the last word?"}
        ],
    )
    print('append', response)


def test_chat(client: Mistral) -> None:
    response = client.models.list()
    print(response)

    response = client.chat.complete(model="mistral-small-latest", messages=[
        {
            "content": "Who is the best German painter? Answer in one short sentence.",
            "role": "user",
        },
    ], stream=False, response_format={
        "type": "text",
    })
    print(response)
    # id='8edf2bdf6b464b9cb77b137b068a12dc' object='chat.completion' model='mistral-small-latest'
    # usage=UsageInfo(prompt_tokens=16, completion_tokens=14, total_tokens=30, prompt_audio_seconds=Unset(), num_cached_tokens=0)
    # created=1770264706
    # choices=[ChatCompletionChoice(index=0, message=AssistantMessage(content='Albrecht DÃ¼rer is often regarded as the best German painter.', tool_calls=None, prefix=False, role='assistant'), finish_reason='stop')]

    response = client.chat.complete(model="mistral-small-latest", messages=[
        {
            "content": "Who is the best German painter? Answer in one short sentence.",
            "role": "user",
        },
    ], stream=False, response_format={
        "type": "json_object",
    })
    print(response)
    # {\n  "answer": "Albrecht Durer is often considered one of the best German painters."\n}


def test_classify(client: Mistral) -> None:
    response = client.classifiers.classify(
        model="mistral-moderation-latest",  # Invalid model - not available for me?
        inputs=[
            "Who is the best German painter? Answer in one short sentence.",
            "never kys",
        ]
    )
    print(response)


def test_embeddings(client: Mistral) -> None:
    embeddings_batch_response = client.embeddings.create(
        model="mistral-embed",
        inputs=["Embed this sentence.", "As well as this one."],
    )
    print(embeddings_batch_response)
    # id='b1763c1e0e7a48f58faaab6b090eb83b' object='list' model='mistral-embed'
    # usage=UsageInfo(prompt_tokens=15, completion_tokens=0, total_tokens=15, prompt_audio_seconds=None, request_count=None, prompt_token_details=None, num_cached_tokens=0)
    # data=[
    # EmbeddingResponseData(object='embedding', embedding=[-0.016632080078125, 0.0701904296875, 0.03143310546875, 0.01309967041015625, 0.0202789306640625, 0.009735107421875, 0.0255126953125, 0.0018939971923828125, -0.0087738037109375, -0.0087738037109375, -0.039642333984375, 0.058319091796875, -0.025634765625, 0.0074615478515625, -0.0290374755859375, 0.040313720703125, 0.0546875, 0.0257415771484375, 0.03167724609375, 0.02288818359375, -0.056732177734375, -0.01617431640625, -0.061492919921875, 0.01241302490234375, -0.0457763671875, -0.026763916015625, -0.00797271728515625, -0.037811279296875, -0.03985595703125, 0.0009074211120605469, 0.02392578125, -0.0300750732421875, 0.0305328369140625, -0.0024776458740234375, -0.0125274658203125, -0.036224365234375, -0.03326416015625, -0.044891357421875, 0.01355743408203125, 0.0019216537475585938, 0.00991058349609375, 0.00011390447616577148, -0.0307464599609375, -0.0231170654296875, -0.0249481201171875, -0.0296173095703125, 0.0044403076171875, -0.027679443359375, -0.0176544189453125, -0.03326416015625, 0.01007843017578125, 0.05010986328125, 0.034637451171875, -0.01218414306640625, -0.00688934326171875, 0.03143310546875, 0.030303955078125, -0.0002474784851074219, -0.0457763671875, 0.0232391357421875, -0.054443359375, -0.02801513671875, 0.003231048583984375, 0.032135009765625, 0.031890869140625, -0.00455474853515625, -0.034637451171875, -0.0074615478515625, 0.0033740997314453125, 0.027557373046875, 0.0478515625, 0.0154876708984375, -0.01270294189453125, 0.04351806640625, -0.0162811279296875, -0.0633544921875, 0.0108795166015625, -0.00814056396484375, 0.002719879150390625, 0.01708984375, -0.02117919921875, 0.04351806640625, 0.08245849609375, -0.035980224609375, 0.0154876708984375, -0.010650634765625, 0.046478271484375, -0.0133819580078125, 0.0019502639770507812, 0.017425537109375, 0.0205078125, 0.04443359375, 0.0011529922485351562, -0.030975341796875, 0.02984619140625, 0.018798828125, -0.056732177734375, -0.0162811279296875, 0.003345489501953125, 0.0206146240234375, 0.0296173095703125, -0.033935546875, 0.07611083984375, -0.0167388916015625, 0.025054931640625, -0.00968170166015625, 0.00540924072265625, 0.005039215087890625, -0.00933837890625, -0.026885986328125, -0.11846923828125, 0.006748199462890625, -0.004840850830078125, -0.06927490234375, -0.033477783203125, -0.0093994140625, -0.0154876708984375, 0.03826904296875, -0.08154296875, 0.018341064453125, 0.0220947265625, 0.0006227493286132812, -0.0218658447265625, -0.03302001953125, -0.04669189453125, -0.043060302734375, 0.0024204254150390625, 0.01776123046875, -0.0027904510498046875, 0.002719879150390625, -0.0323486328125, -0.0265350341796875, -0.0291595458984375, -0.043731689453125, 0.0151519775390625, -0.0357666015625, 0.0272216796875, -0.002819061279296875, -0.01224517822265625, -0.0125885009765625, 0.0146942138671875, -0.047149658203125, -0.0078582763671875, 0.004726409912109375, -0.0255126953125, 0.004924774169921875, -0.0181121826171875, 0.018341064453125, -0.031890869140625, 0.00017261505126953125, -0.0128173828125, 0.034637451171875, 0.0596923828125, 0.007518768310546875, -0.01503753662109375, -0.0240325927734375, -0.0283660888671875, 0.0266571044921875, 0.0189056396484375, -0.0260772705078125, -0.0036449432373046875, -0.002193450927734375, 0.00865936279296875, 0.032806396484375, -0.032806396484375, -0.0296173095703125, 0.01047515869140625, 0.0491943359375, -0.04168701171875, 0.00757598876953125, 0.048980712890625, -0.009796142578125, 0.071533203125, 0.05194091796875, -0.0142364501953125, 0.0189056396484375, 0.006664276123046875, -0.00714874267578125, 0.08612060546875, 0.0323486328125, 0.0287017822265625, -0.0207366943359375, 0.0018148422241210938, -0.0312042236328125, 0.0020084381103515625, -0.0035457611083984375, -0.0300750732421875, 0.02984619140625, 0.01036834716796875, 0.0031604766845703125, -0.017547607421875, -0.01617431640625, -0.037811279296875, 0.0193634033203125, 0.0117340087890625, 0.0494384765625, 0.025848388671875, -0.043060302734375, 0.0129852294921875, -0.0162811279296875, 0.029388427734375, 0.0048980712890625, -0.0207366943359375, 0.0087738037109375, 0.01093292236328125, 0.019134521484375, -0.03668212890625, 0.01122283935546875, 0.0491943359375, -0.03485107421875, 0.00991058349609375, -0.0083160400390625, 0.01218414306640625, -0.044891357421875, -0.018798828125, 0.0111083984375, 0.00984954833984375, 0.002079010009765625, -0.044189453125, -0.0100250244140625, 0.01047515869140625, -0.06744384765625, 0.00435638427734375, -0.0013027191162109375, -0.025970458984375, 0.06195068359375, 0.0159454345703125, -0.01132965087890625, -0.00928497314453125, -0.004955291748046875, 0.014068603515625, 0.02642822265625, -0.0057525634765625, -0.01457977294921875, 0.00803375244140625, -0.00859832763671875, 0.062408447265625, 0.044891357421875, -0.0167388916015625, 0.0185699462890625, -0.0082550048828125, 0.0426025390625, 0.01070404052734375, 0.032562255859375, 0.003559112548828125, 0.00734710693359375, -6.556510925292969e-06, -0.02734375, 0.03826904296875, 0.050567626953125, -0.0391845703125, -0.0117340087890625, -0.02392578125, 0.0074615478515625, -0.07061767578125, -0.038726806640625, 0.0079193115234375, -0.036895751953125, 0.042144775390625, -0.04168701171875, -0.002391815185546875, 0.011505126953125, -0.00455474853515625, -0.00264739990234375, 0.047393798828125, 0.02642822265625, -0.0218658447265625, 0.004413604736328125, 0.07196044921875, -0.0018367767333984375, 0.01099395751953125, -0.011962890625, 0.04010009765625, 0.0254058837890625, 0.034393310546875, -0.0355224609375, -0.0095672607421875, 0.005893707275390625, 0.01270294189453125, -0.00928497314453125, -0.025970458984375, 0.0282440185546875, -0.0031185150146484375, 0.0300750732421875, -0.041229248046875, 0.002063751220703125, -0.03143310546875, 0.034637451171875, -0.03485107421875, -0.06927490234375, 0.0323486328125, 0.046234130859375, 0.019927978515625, -0.01708984375, -0.01201629638671875, -0.0093994140625, 0.0232391357421875, 0.0099639892578125, -0.006977081298828125, 0.02117919921875, 0.03668212890625, -0.032806396484375, -0.014923095703125, 0.004413604736328125, 0.04327392578125, -0.0341796875, 0.00350189208984375, -0.01201629638671875, -0.01959228515625, -0.1285400390625, 0.01303863525390625, -0.006748199462890625, 0.02117919921875, 0.0240325927734375, 0.021636962890625, 0.00905609130859375, -0.023468017578125, -0.0241546630859375, -0.005153656005859375, -0.0274505615234375, -0.053314208984375, -0.05010986328125, 0.0733642578125, -0.00330352783203125, 0.009796142578125, 0.002193450927734375, 0.03643798828125, -0.0271148681640625, 0.0173187255859375, -0.06927490234375, 0.028472900390625, 0.0224456787109375, 0.0323486328125, 0.033721923828125, 0.035308837890625, 0.0269927978515625, 0.03143310546875, 0.0389404296875, -0.008087158203125, 0.01451873779296875, -0.01093292236328125, -0.016632080078125, 0.031890869140625, -0.00836944580078125, -0.05194091796875, 7.748603820800781e-07, -0.0196990966796875, 0.0018939971923828125, 0.03985595703125, -0.0176544189453125, 0.0283660888671875, -0.0146942138671875, 0.00350189208984375, 0.071533203125, -0.0095672607421875, 0.1025390625, -0.0277862548828125, 0.00640869140625, -0.004215240478515625, 0.068359375, -0.050811767578125, -0.007232666015625, 0.0121307373046875, 0.01441192626953125, 0.02471923828125, 0.041015625, -0.0218658447265625, -0.0255126953125, -0.02392578125, 0.01047515869140625, -0.0203857421875, -0.016510009765625, 0.008087158203125, 0.021759033203125, -0.004726409912109375, 0.037353515625, 0.010650634765625, -0.0129852294921875, -0.00213623046875, -0.0169677734375, -0.037139892578125, 0.0196990966796875, 0.0260772705078125, 0.0096282958984375, -0.025177001953125, -0.03509521484375, -0.0697021484375, 0.0030460357666015625, -0.0203857421875, 0.09613037109375, 0.058319091796875, 0.0423583984375, 0.02734375, -0.0012960433959960938, -0.0269927978515625, 0.0249481201171875, 0.00843048095703125, 0.031890869140625, 0.06878662109375, 0.0214080810546875, 0.03509521484375, -0.044189453125, 0.048065185546875, 0.019256591796875, 0.030303955078125, 0.0129852294921875, 0.03302001953125, 0.0426025390625, 0.0305328369140625, -0.03668212890625, 0.0274505615234375, 0.05169677734375, -0.0255126953125, 0.0151519775390625, -0.0214080810546875, -0.00583648681640625, -0.040771484375, -0.057403564453125, -0.004611968994140625, 0.01708984375, 0.0355224609375, -0.03668212890625, -0.0870361328125, -0.03851318359375, 0.0355224609375, -0.06927490234375, 0.003574371337890625, 0.009796142578125, -0.0160675048828125, 0.01104736328125, -0.028594970703125, -0.053314208984375, 0.07427978515625, -0.01526641845703125, 0.0033321380615234375, 0.048309326171875, 0.04351806640625, -0.068359375, 0.0181121826171875, -0.0283660888671875, 0.005893707275390625, -0.012298583984375, 0.007091522216796875, 0.049652099609375, -0.02301025390625, 0.0209503173828125, 0.03167724609375, 0.050567626953125, 0.00478363037109375, -0.049652099609375, 0.032806396484375, -0.005924224853515625, -0.0207366943359375, -0.0137786865234375, 0.0104217529296875, -0.01264190673828125, -0.038055419921875, -0.003559112548828125, -0.0282440185546875, 0.0252838134765625, 0.012359619140625, 0.0167388916015625, -0.037139892578125, -0.052154541015625, -0.0205078125, 0.077880859375, 0.04168701171875, 0.0633544921875, 0.015838623046875, -0.058319091796875, 0.041900634765625, -0.046234130859375, -0.00991058349609375, -0.01560211181640625, 0.0184478759765625, -0.023468017578125, 0.037353515625, 0.007686614990234375, 0.00899505615234375, -0.0265350341796875, 0.01418304443359375, -0.0030040740966796875, -0.0125274658203125, -0.01287078857421875, 0.05877685546875, 0.0179901123046875, -0.068359375, -0.043975830078125, -0.0235748291015625, -0.01036834716796875, 0.03851318359375, -0.0494384765625, -0.0238037109375, -0.00606536865234375, -0.048065185546875, -0.0227813720703125, 0.0007190704345703125, -0.0111083984375, -0.0305328369140625, 0.00991058349609375, 0.0016946792602539062, -0.0151519775390625, 0.0202789306640625, 0.026885986328125, 0.0210723876953125, 0.025634765625, -0.0007367134094238281, -0.0274505615234375, 0.042144775390625, -0.0231170654296875, -0.0494384765625, -0.004756927490234375, 0.0095672607421875, 0.00714874267578125, 0.00968170166015625, -0.041229248046875, -0.03143310546875, -0.01287078857421875, -0.0240325927734375, -0.0215301513671875, -0.007404327392578125, -0.008941650390625, -0.047149658203125, -0.034393310546875, 0.017425537109375, 0.0526123046875, 0.00848388671875, -0.015838623046875, 0.052154541015625, -0.035980224609375, 0.024261474609375, -0.014923095703125, -0.0014734268188476562, 0.035980224609375, -0.00922393798828125, 0.01947021484375, 0.006748199462890625, 0.0164031982421875, -0.04010009765625, 0.0209503173828125, -0.06378173828125, -0.0003364086151123047, -0.01435089111328125, -0.0220947265625, -0.0017938613891601562, -0.042144775390625, -0.0902099609375, 0.01457977294921875, 0.0108795166015625, -0.0030612945556640625, 0.015838623046875, -0.059234619140625, 0.01099395751953125, -0.041015625, -0.0035305023193359375, 0.039642333984375, -0.0312042236328125, 0.01275634765625, 0.004611968994140625, 0.005809783935546875, 0.0260772705078125, -0.002506256103515625, 0.040313720703125, -0.006778717041015625, 0.01007843017578125, -0.06060791015625, -0.01025390625, -0.0030612945556640625, -0.017547607421875, 0.03985595703125, -0.0100250244140625, 0.033935546875, -0.01526641845703125, -0.01617431640625, 0.06512451171875, 0.0287017822265625, 0.008544921875, -0.028472900390625, 0.013153076171875, -0.0038433074951171875, 0.006862640380859375, 0.046234130859375, -0.0460205078125, -0.036895751953125, 0.032135009765625, 0.041015625, 0.037811279296875, 0.01076507568359375, 0.0164031982421875, 0.034637451171875, -0.0053253173828125, 0.0491943359375, 0.01480865478515625, -0.0186767578125, -0.044189453125, 0.036224365234375, 0.0341796875, 0.01457977294921875, 0.01161956787109375, 0.033477783203125, 0.0254058837890625, -0.0008292198181152344, 0.0042724609375, 0.06561279296875, 0.058319091796875, -0.0205078125, -0.040557861328125, -0.00213623046875, 0.0218658447265625, -0.0288238525390625, -0.049896240234375, 0.033935546875, 0.0240325927734375, -0.03826904296875, -0.001750946044921875, -0.0038166046142578125, -0.0017938613891601562, 0.033935546875, 0.0087738037109375, 0.00469970703125, 0.061065673828125, 0.01457977294921875, -0.0248260498046875, -0.01013946533203125, -0.0357666015625, 0.0279083251953125, 0.034393310546875, 0.005523681640625, -0.01372528076171875, 0.01708984375, 0.0223236083984375, 0.0236968994140625, -0.0227813720703125, 0.033721923828125, 0.01526641845703125, 0.0266571044921875, 0.050811767578125, 0.071044921875, -0.0207366943359375, -0.0290374755859375, -0.02642822265625, 0.05511474609375, 0.0112762451171875, 0.04669189453125, -0.01218414306640625, -0.0019502639770507812, 0.0184478759765625, -0.0457763671875, -0.01036834716796875, 0.037353515625, 0.009796142578125, -0.0205078125, -0.0305328369140625, 0.0129852294921875, 0.0007367134094238281, 0.0244903564453125, 0.0013523101806640625, 0.004329681396484375, -0.025054931640625, 0.041900634765625, -0.04010009765625, -0.0494384765625, 0.01959228515625, 0.00774383544921875, -0.0159454345703125, -0.0423583984375, -0.03643798828125, 0.0282440185546875, -0.01241302490234375, -0.0628662109375, -0.03826904296875, 0.043060302734375, 0.002719879150390625, -0.04443359375, 0.006664276123046875, 0.01036834716796875, -0.0125885009765625, -0.0018224716186523438, -0.026763916015625, 0.0074615478515625, 0.014923095703125, -0.053314208984375, 0.0074615478515625, 0.0202789306640625, 0.003986358642578125, -0.01418304443359375, -0.0265350341796875, -0.03302001953125, -0.0099639892578125, 0.01224517822265625, 0.0017728805541992188, -0.0176544189453125, -0.0341796875, 0.0272216796875, 0.0291595458984375, 0.020843505859375, -0.02471923828125, -0.01372528076171875, -0.0478515625, -0.01776123046875, 0.0185699462890625, 0.0133819580078125, -0.0660400390625, 0.0146942138671875, 0.06787109375, -0.05194091796875, 0.00836944580078125, -0.006778717041015625, 0.0074615478515625, 0.01007843017578125, 0.00951385498046875, -0.01326751708984375, 0.01184844970703125, 0.06744384765625, 0.0057220458984375, -0.0423583984375, 0.01104736328125, -0.0235748291015625, 0.033935546875, 0.0087738037109375, 0.0111083984375, -0.025054931640625, 0.036895751953125, 0.0146942138671875, -0.01708984375, 0.0227813720703125, -0.07562255859375, -0.00373077392578125, 0.0227813720703125, 0.030975341796875, -0.00984954833984375, 0.0274505615234375, 0.003032684326171875, 0.004756927490234375, -0.0226593017578125, -0.00797271728515625, 0.01155853271484375, 0.0099639892578125, -0.0274505615234375, -0.031890869140625, 0.005237579345703125, -0.0291595458984375, 0.004756927490234375, -0.0257415771484375, 0.032562255859375, 0.007404327392578125, -0.00555419921875, 0.025054931640625, 0.0193634033203125, 0.0146942138671875, -0.0037021636962890625, 0.0238037109375, -0.050811767578125, 0.0291595458984375, 0.00350189208984375, 0.004756927490234375, -0.0025348663330078125, -0.01287078857421875, -0.0070037841796875, 0.00843048095703125, 0.0235748291015625, -0.038055419921875, 0.03668212890625, 0.03509521484375, -0.00649261474609375, -0.009735107421875, -0.0074615478515625, -0.0288238525390625, 0.056488037109375, -0.0274505615234375, 0.0478515625, -0.035308837890625, 0.0173187255859375, -0.08111572265625, 0.056732177734375, 0.01441192626953125, 0.040771484375, 0.0070343017578125, -0.0159454345703125, -0.043060302734375, -0.0389404296875, -0.0224456787109375, 0.016632080078125, -0.00543975830078125, 0.0478515625, -0.0027618408203125, -0.036895751953125, -0.0070343017578125, -0.0146942138671875, 0.007232666015625, 0.044189453125, -0.00395965576171875, -0.0391845703125, 0.06561279296875, -0.026885986328125, -0.0061492919921875, -0.01617431640625, 0.0241546630859375, 0.0162811279296875, -0.00691986083984375, 0.00501251220703125, -0.032135009765625, 0.047149658203125, 0.0279083251953125, -0.03302001953125, 0.05352783203125, 0.003360748291015625, -0.0057525634765625, 0.029388427734375, -0.0074615478515625, 0.012298583984375, 0.0240325927734375, -0.0070343017578125, -0.0190277099609375, -0.034637451171875, -0.08203125, 0.01076507568359375, -0.0357666015625, -0.02801513671875, 0.01076507568359375, -0.0038166046142578125, 0.0012960433959960938, -0.023345947265625, 0.038726806640625, 0.011962890625, -0.0252838134765625, 0.00223541259765625, 0.010589599609375, -0.033721923828125, 0.04693603515625, -0.01025390625, -0.041473388671875, 0.0236968994140625, -0.00640869140625, -0.030303955078125, -0.007259368896484375, 0.018218994140625, -0.025634765625, 0.0312042236328125, -0.049652099609375, -0.032135009765625, 0.01788330078125, 0.032806396484375, 0.01480865478515625, -0.00933837890625, 0.045562744140625, 0.00905609130859375, -0.0266571044921875, 0.0231170654296875, -0.033477783203125, -0.0249481201171875, -0.0007901191711425781, 6.628036499023438e-05, -0.00583648681640625, 0.002918243408203125, 0.018798828125, 0.014007568359375, 0.024261474609375, -0.0271148681640625, -0.006351470947265625, 0.0193634033203125, 0.018218994140625, 0.02459716796875, 0.03167724609375, 0.032806396484375, 0.00455474853515625, -0.0162811279296875, -0.003559112548828125, -0.0865478515625, 0.00018596649169921875, -0.0241546630859375, -0.057861328125, 0.01349639892578125, 0.04669189453125, 0.05718994140625, 0.0391845703125, 0.0288238525390625, 0.039398193359375, 0.03826904296875, -0.0202789306640625, -0.03302001953125, -0.033721923828125, 0.0022487640380859375, -0.0009965896606445312, 0.01155853271484375, -0.06878662109375, 0.018341064453125, 0.058319091796875, -0.025970458984375, -0.038726806640625, 0.02392578125, 0.040771484375, 0.07427978515625, 0.037353515625, -0.0003380775451660156, -0.049896240234375, 0.00905609130859375, 0.0261993408203125, 0.0032749176025390625, -0.01418304443359375, 0.002277374267578125, 0.011444091796875, 0.050567626953125, -0.044189453125, -0.004413604736328125, -0.02642822265625, 0.061492919921875, 0.00415802001953125, -0.06195068359375, -0.0162811279296875, 0.0202789306640625, -0.0027484893798828125, -0.010589599609375, -0.005695343017578125, 0.043731689453125, -0.03167724609375, 0.0108184814453125, 0.01355743408203125, 0.004299163818359375, 0.0770263671875, 0.005664825439453125, -0.00501251220703125, 0.00351715087890625, 0.0282440185546875, 0.01947021484375, -0.03985595703125, -0.036895751953125, -0.013153076171875, -0.040557861328125, 0.06060791015625, -0.0027618408203125, 0.022552490234375, 0.0235748291015625, -0.029388427734375, 0.014923095703125, 0.007518768310546875, 0.0633544921875, 0.0142974853515625, 0.02392578125, 0.0296173095703125, -0.0296173095703125, -0.0025920867919921875, 0.018341064453125, 0.002391815185546875, 0.005382537841796875, -0.02642822265625, -0.00848388671875, -0.049896240234375, 0.018218994140625, 0.0025768280029296875, -0.025848388671875, 0.0240325927734375, -0.00922393798828125, 0.01190185546875, -0.0279083251953125, -0.0134429931640625, 0.011444091796875, 0.01708984375, -0.036895751953125, 0.0201568603515625, 0.0142974853515625, 0.002918243408203125, -0.0210723876953125, -0.08380126953125, 0.03826904296875, 0.01947021484375, 0.011962890625, 0.0154876708984375, -0.00180816650390625, 0.048309326171875, -0.0193634033203125, -0.01503753662109375, 0.00899505615234375, 0.005039215087890625, 0.0205078125, 0.0186767578125, 0.01617431640625, -0.046234130859375, 0.00991058349609375, 0.00734710693359375, -0.039398193359375, 0.004840850830078125, 0.05511474609375, 0.0181121826171875, 0.036895751953125, 0.01457977294921875, -0.005809783935546875, -0.07562255859375, 0.041473388671875, 0.0066070556640625, -0.0236968994140625, -0.002079010009765625, -0.01708984375, 0.00540924072265625, -0.01116180419921875, 0.0628662109375, -0.02459716796875, 0.040557861328125, 0.01007843017578125, 0.039398193359375, -0.01224517822265625, 0.004215240478515625, -0.0159454345703125, 0.03985595703125, 0.02984619140625, 0.051483154296875, 0.01122283935546875, -0.0151519775390625, -0.06787109375, -0.0014448165893554688, -0.0095672607421875, 0.006320953369140625, 0.0271148681640625, -0.055816650390625, 0.00223541259765625, 0.035980224609375, 0.06512451171875, 0.0025482177734375, -0.00264739990234375, 0.056732177734375, 0.01270294189453125, -0.02801513671875, 0.004329681396484375, -0.036895751953125], index=0),
    # EmbeddingResponseData(object='embedding', embedding=[-0.0230560302734375, 0.039337158203125, 0.0521240234375, -0.0184783935546875, 0.034271240234375, 0.004085540771484375, 0.0247955322265625, -0.0006761550903320312, -0.0121612548828125, -0.006870269775390625, -0.0135040283203125, 0.042022705078125, -0.0273284912109375, -0.01531982421875, -0.0413818359375, 0.0303192138671875, 0.006160736083984375, 0.0012731552124023438, -0.0067901611328125, 0.0108184814453125, -0.03680419921875, -0.0333251953125, -0.044525146484375, 0.020538330078125, -0.042327880859375, -0.03143310546875, -0.01232147216796875, -0.0489501953125, -0.08526611328125, 0.02069091796875, -0.0025177001953125, -0.025115966796875, 0.01934814453125, 0.00702667236328125, 0.0300140380859375, -0.04168701171875, -0.025115966796875, -0.0246429443359375, 0.0222625732421875, -0.00025653839111328125, -0.0148468017578125, -0.0175323486328125, 0.0144500732421875, -0.00521087646484375, -0.00994873046875, 0.015716552734375, -0.0017671585083007812, -0.0203704833984375, 0.01334381103515625, -0.007305145263671875, -0.032684326171875, 0.04644775390625, 0.0386962890625, -0.00038242340087890625, 0.0015888214111328125, 0.05401611328125, -0.004482269287109375, -0.040130615234375, -0.0198974609375, 0.0121612548828125, -0.08087158203125, -0.033966064453125, 0.00809478759765625, 0.034271240234375, -0.0028820037841796875, 0.01326751708984375, -0.0020732879638671875, -0.0127105712890625, -0.0179290771484375, 0.016815185546875, 0.04327392578125, 0.01018524169921875, -0.00396728515625, 0.04168701171875, -0.020538330078125, -0.07421875, 0.049591064453125, 0.01010894775390625, 0.013031005859375, 0.018798828125, -0.0282745361328125, -0.013580322265625, 0.06158447265625, -0.02685546875, -0.0169830322265625, -0.0027828216552734375, 0.0221099853515625, -0.032073974609375, -0.00923919677734375, 0.031280517578125, 0.0121612548828125, -0.004894256591796875, 0.011688232421875, 0.01666259765625, 0.056854248046875, 0.0355224609375, -0.02069091796875, -0.0147705078125, 0.01531982421875, 0.0203704833984375, 0.033477783203125, -0.0273284912109375, 0.061279296875, 0.0192718505859375, 0.00272369384765625, -0.0279541015625, 0.00943756103515625, 0.01453399658203125, -0.01263427734375, -0.029693603515625, -0.09222412109375, -0.002101898193359375, 0.03631591796875, -0.056854248046875, -0.004718780517578125, 0.00075531005859375, -0.002269744873046875, 0.046112060546875, -0.048004150390625, 0.00963592529296875, 0.028900146484375, -0.01334381103515625, -0.01611328125, -0.001678466796875, -0.047393798828125, -0.023529052734375, -0.002349853515625, 0.0152435302734375, 0.003612518310546875, -0.01239776611328125, -0.0203704833984375, -0.013031005859375, -0.035369873046875, -0.028106689453125, 0.00635528564453125, -0.0174560546875, 0.031280517578125, 0.0211639404296875, -0.0301666259765625, -0.0015888214111328125, 0.05181884765625, -0.0249481201171875, -0.0285797119140625, 0.003692626953125, -0.025115966796875, 0.0180816650390625, -0.02984619140625, 0.03521728515625, -0.0364990234375, 0.042327880859375, -0.021484375, 0.0338134765625, 0.0328369140625, 0.0153961181640625, -0.0246429443359375, -0.025909423828125, -0.0171356201171875, -0.017852783203125, 0.025115966796875, -0.0219573974609375, -0.0227508544921875, 0.019500732421875, -0.01113128662109375, 0.0328369140625, -0.0574951171875, -0.049591064453125, -0.05084228515625, -0.006988525390625, -0.036651611328125, 0.01192474365234375, 0.06475830078125, -0.033172607421875, 0.067626953125, 0.053375244140625, 0.00782012939453125, 0.03631591796875, 0.03839111328125, -0.0249481201171875, 0.058746337890625, 0.0210113525390625, 0.0008883476257324219, -0.048004150390625, 0.0019931793212890625, -0.007305145263671875, -0.011688232421875, -0.02069091796875, 0.00540924072265625, 0.00032830238342285156, -0.0112152099609375, 0.040740966796875, -0.01934814453125, -0.0139007568359375, -0.034576416015625, 0.0252685546875, -0.031585693359375, 0.017059326171875, 0.051483154296875, -0.01910400390625, 0.05023193359375, 0.0196685791015625, 0.0306396484375, 0.02069091796875, -0.00655364990234375, 0.06097412109375, 0.0199737548828125, 0.0139007568359375, -0.038055419921875, 0.01374053955078125, 0.0489501953125, -0.036956787109375, -0.025115966796875, -0.02178955078125, -0.01239776611328125, -0.042327880859375, -0.00994873046875, -0.0125579833984375, 0.03302001953125, -0.005962371826171875, -0.039642333984375, 0.0285797119140625, -0.0006270408630371094, -0.031890869140625, 0.01326751708984375, 0.035064697265625, 0.0032978057861328125, 0.0266876220703125, 0.0018854141235351562, -0.01453399658203125, -0.00849151611328125, -0.006000518798828125, -0.016815185546875, -0.018951416015625, -0.0098724365234375, 0.0229034423828125, -0.01287078857421875, -0.0084075927734375, 0.0537109375, 0.005527496337890625, 0.01018524169921875, 0.012237548828125, -0.053070068359375, 0.0184783935546875, 0.0012140274047851562, 0.027801513671875, 0.048004150390625, -0.007579803466796875, 0.02178955078125, -0.013427734375, 0.0240020751953125, 0.0650634765625, -0.056854248046875, 0.016265869140625, -0.06793212890625, 0.05242919921875, -0.0521240234375, -0.008453369140625, -0.005016326904296875, -0.050537109375, 0.043914794921875, -0.034271240234375, -0.0009870529174804688, 0.031280517578125, 0.02178955078125, -0.0183258056640625, 0.0222625732421875, 0.007579803466796875, -0.051483154296875, -0.01374053955078125, 0.0704345703125, -0.00872802734375, 0.003986358642578125, -0.0176849365234375, 0.022430419921875, 0.01934814453125, 0.048004150390625, 0.007541656494140625, -0.0116119384765625, 0.017608642578125, -0.00041222572326660156, 0.006671905517578125, -0.022430419921875, 0.0165863037109375, -0.02606201171875, 0.06915283203125, -0.06097412109375, -0.0290679931640625, -0.00782012939453125, 0.02337646484375, -0.0219573974609375, -0.08148193359375, 0.01508331298828125, 0.036163330078125, -0.01105499267578125, 0.0263824462890625, 0.009552001953125, -0.024322509765625, 0.003612518310546875, 0.032379150390625, -0.01468658447265625, 0.025115966796875, 0.00916290283203125, -0.035369873046875, -0.002368927001953125, 0.015869140625, 0.042633056640625, -0.05401611328125, -0.056549072265625, -0.0229034423828125, -0.0161895751953125, -0.09161376953125, -0.02984619140625, 0.016510009765625, -0.0027637481689453125, 0.01239776611328125, 0.013580322265625, 0.01232147216796875, -0.0355224609375, -0.0222625732421875, 0.042022705078125, -0.0252685546875, -0.0190277099609375, 0.00963592529296875, 0.05780029296875, -0.0364990234375, -0.006397247314453125, -0.03948974609375, 0.022430419921875, -0.0257415771484375, -0.013580322265625, -0.0265350341796875, 0.048004150390625, 0.006000518798828125, 0.024322509765625, 0.039642333984375, 0.037750244140625, 0.0249481201171875, 0.026214599609375, 0.026214599609375, -0.0047760009765625, -0.0088043212890625, -0.004974365234375, 0.0156402587890625, 0.0236968994140625, 0.021484375, -0.02984619140625, -0.0026645660400390625, -0.0107421875, 0.002567291259765625, -0.003276824951171875, 0.024322509765625, 0.024169921875, -0.004283905029296875, -0.0104217529296875, 0.056854248046875, -0.027008056640625, 0.10992431640625, -0.012237548828125, -0.042022705078125, 0.01374053955078125, 0.042022705078125, -0.036651611328125, 0.045806884765625, 0.049285888671875, 0.018402099609375, -0.03143310546875, 0.0338134765625, -0.03631591796875, -0.00540924072265625, 0.0006070137023925781, -0.023223876953125, 0.025909423828125, 0.0238494873046875, 0.01097869873046875, 0.0213165283203125, 0.01428985595703125, 0.00936126708984375, 0.046112060546875, -0.0198974609375, -0.042633056640625, -0.0011005401611328125, -0.050537109375, 0.02337646484375, 0.03143310546875, 0.02716064453125, 0.0117645263671875, -0.03570556640625, -0.05938720703125, 0.004619598388671875, 0.006198883056640625, 0.10235595703125, 0.07232666015625, 0.032073974609375, 0.022430419921875, -0.01641845703125, -0.04327392578125, 0.0413818359375, 0.019195556640625, 0.0282745361328125, 0.035064697265625, 0.0008983612060546875, -0.003276824951171875, -0.065673828125, 0.033477783203125, 0.0284271240234375, 0.0238494873046875, 0.0225830078125, 0.01428985595703125, 0.049896240234375, 0.0229034423828125, -0.035369873046875, 0.0284271240234375, 0.043914794921875, -0.03790283203125, -0.00258636474609375, -0.0033168792724609375, -0.00655364990234375, -0.039794921875, -0.0210113525390625, -0.01239776611328125, -0.00655364990234375, 0.01381683349609375, 0.01145172119140625, -0.045806884765625, 0.02337646484375, 0.060333251953125, -0.07073974609375, -0.0067138671875, 0.042022705078125, -0.0276336669921875, 0.02716064453125, -0.040740966796875, -0.064453125, 0.067626953125, -0.03363037109375, -0.0303192138671875, 0.01500701904296875, -0.002941131591796875, -0.02874755859375, 0.024169921875, -0.0328369140625, -0.0172882080078125, -0.0034351348876953125, 0.003849029541015625, 0.0249481201171875, 0.0016384124755859375, 0.0174560546875, 0.0274810791015625, 0.0025272369384765625, 0.00107574462890625, -0.034912109375, 0.0144500732421875, -0.0079345703125, -0.07489013671875, 0.004344940185546875, 0.043914794921875, -0.006908416748046875, -0.043914794921875, 0.0176849365234375, -0.023529052734375, -0.02984619140625, 0.00809478759765625, 0.049591064453125, -0.0247955322265625, -0.06536865234375, 0.0041656494140625, 0.050537109375, 0.01366424560546875, 0.049896240234375, -0.00860595703125, -0.03839111328125, -0.0038890838623046875, -0.023529052734375, -0.036163330078125, -0.01113128662109375, 0.007778167724609375, -0.030792236328125, 0.055908203125, 0.0255889892578125, -0.00513458251953125, -0.005924224853515625, 0.01611328125, 0.0104217529296875, 0.00916290283203125, -0.049591064453125, 0.031280517578125, 0.020843505859375, -0.058746337890625, -0.03948974609375, -0.024169921875, 0.015869140625, 0.0285797119140625, -0.007106781005859375, -0.00872802734375, -0.00453948974609375, -0.054962158203125, -0.0125579833984375, -0.0195770263671875, 0.004482269287109375, -0.0006418228149414062, 0.0153961181640625, 0.0222625732421875, -0.0221099853515625, -0.0198974609375, 0.0230560302734375, 0.0247955322265625, 0.0067138671875, 0.0180816650390625, -0.03759765625, 0.02606201171875, -0.04644775390625, -0.01374053955078125, -0.0263824462890625, -0.01145172119140625, 0.006595611572265625, 0.01500701904296875, -0.030487060546875, -0.03948974609375, -0.01334381103515625, -0.0187225341796875, -0.0102691650390625, -0.049285888671875, -0.028900146484375, -0.039642333984375, -0.03839111328125, 0.0266876220703125, -0.0003380775451660156, 0.005687713623046875, -0.0025177001953125, 0.0117645263671875, -0.038543701171875, 0.01326751708984375, -0.0120849609375, 0.01113128662109375, 0.02874755859375, -0.032684326171875, -0.0018949508666992188, -0.0014514923095703125, 0.01428985595703125, -0.045166015625, 0.0014410018920898438, -0.05621337890625, -0.0153961181640625, 0.004680633544921875, -0.030792236328125, -0.02337646484375, -0.0413818359375, -0.1187744140625, -0.01184844970703125, 0.042022705078125, 0.0221099853515625, 0.0008931159973144531, -0.0355224609375, 0.038543701171875, -0.0247955322265625, -0.005489349365234375, 0.0282745361328125, 0.0024871826171875, -0.00738525390625, -0.00010734796524047852, -0.009002685546875, 0.0173797607421875, 0.00849151611328125, 0.05621337890625, 0.03570556640625, -0.00537109375, -0.049896240234375, 0.017059326171875, 0.0184783935546875, -0.021484375, 0.00426483154296875, -0.026214599609375, 0.045166015625, 0.0019054412841796875, -0.024322509765625, 0.04107666015625, 0.0198211669921875, 0.0067138671875, -7.462501525878906e-05, -0.0007305145263671875, 0.03411865234375, 0.01145172119140625, 0.06414794921875, -0.04168701171875, -0.01776123046875, 0.02716064453125, 0.0038700103759765625, 0.038848876953125, 0.0167388916015625, 0.0273284912109375, -0.00211334228515625, -0.0230560302734375, 0.049285888671875, -0.0187225341796875, -0.006671905517578125, -0.0521240234375, 0.042633056640625, 0.003692626953125, 0.03253173828125, -0.0042266845703125, 0.06884765625, 0.0266876220703125, 0.00998687744140625, -0.01050567626953125, 0.04705810546875, 0.039794921875, 0.00809478759765625, -0.038543701171875, 0.01910400390625, -0.0015697479248046875, -0.04107666015625, -0.03570556640625, 0.02874755859375, 0.0192718505859375, -0.06982421875, -0.01010894775390625, 0.002399444580078125, 0.01145172119140625, 0.00849151611328125, -0.00067138671875, 0.0014219284057617188, 0.038543701171875, 0.005725860595703125, -0.04168701171875, -0.023223876953125, -0.0274810791015625, 0.0180816650390625, 0.00951385498046875, -0.0008096694946289062, -0.008331298828125, 0.0222625732421875, 0.01319122314453125, -0.01129150390625, 0.004245758056640625, 0.034759521484375, 0.0061187744140625, 0.01232147216796875, -0.0116119384765625, 0.060638427734375, -0.01453399658203125, -0.04864501953125, 0.01641845703125, 0.038543701171875, 0.02685546875, 0.046112060546875, -0.01152801513671875, -0.01010894775390625, -0.004756927490234375, -0.0301666259765625, -0.00943756103515625, 0.0382080078125, -0.019500732421875, -0.0303192138671875, -0.027801513671875, 0.02337646484375, -0.052764892578125, 0.0014705657958984375, 0.07421875, -0.049896240234375, 0.0284271240234375, 0.053070068359375, -0.033966064453125, -0.034271240234375, 0.00927734375, -0.008453369140625, -0.0596923828125, -0.0029811859130859375, -0.0435791015625, 0.033477783203125, -0.055908203125, -0.0543212890625, -0.05023193359375, 0.02685546875, -0.0161895751953125, -0.040740966796875, 0.007541656494140625, -0.0148468017578125, 0.0225830078125, -0.018951416015625, -0.034576416015625, -0.0292205810546875, 0.01287078857421875, -0.00983428955078125, 0.0012483596801757812, 0.0004589557647705078, -0.006397247314453125, -0.016510009765625, -0.01137542724609375, -0.0180816650390625, -0.0015697479248046875, -0.027008056640625, 0.044525146484375, 0.03253173828125, -0.021636962890625, 0.0257415771484375, 0.061920166015625, -0.0125579833984375, -0.01690673828125, 0.037445068359375, -0.031280517578125, 0.002368927001953125, 0.0192718505859375, 0.03839111328125, -0.06536865234375, -0.0117645263671875, 0.047393798828125, -0.0537109375, 0.037750244140625, -0.0169830322265625, -0.03302001953125, -0.0020046234130859375, -0.002349853515625, 0.01129150390625, 0.0163421630859375, 0.0489501953125, -0.005924224853515625, -0.0210113525390625, 0.027008056640625, -0.055908203125, 0.071044921875, 0.005924224853515625, 0.0222625732421875, -0.035369873046875, -0.0007205009460449219, 0.0266876220703125, 0.0021514892578125, 0.005687713623046875, -0.031585693359375, -0.004581451416015625, 0.00675201416015625, 0.00022459030151367188, -0.01555633544921875, 0.00836944580078125, 0.0322265625, -0.0199737548828125, -0.037261962890625, 0.028106689453125, 0.016265869140625, 0.0173797607421875, -0.04168701171875, -0.00702667236328125, -0.0036334991455078125, -0.042327880859375, -0.00588226318359375, -0.016815185546875, 0.03521728515625, 0.0171356201171875, -0.058135986328125, 0.018798828125, 0.01428985595703125, 0.00936126708984375, 0.0301666259765625, 0.0282745361328125, -0.01366424560546875, -0.002902984619140625, -0.01152801513671875, 0.0489501953125, 0.012237548828125, 0.020843505859375, -0.0009722709655761719, -0.003986358642578125, 0.052764892578125, -0.0024280548095703125, 0.0266876220703125, 0.04644775390625, -0.0034942626953125, -0.062225341796875, -0.02874755859375, 0.0015497207641601562, 0.0704345703125, -0.0236968994140625, 0.03839111328125, 0.01050567626953125, -0.0009474754333496094, -0.12066650390625, 0.0467529296875, 0.006595611572265625, 0.0222625732421875, 0.0120849609375, -0.036956787109375, -0.046112060546875, -0.0386962890625, -0.065673828125, 0.0175323486328125, -0.0190277099609375, 0.07012939453125, -0.026214599609375, -0.0240020751953125, -0.01050567626953125, 0.01279449462890625, 0.0026264190673828125, 0.050537109375, 0.01129150390625, -0.039154052734375, 0.07232666015625, -0.02178955078125, -0.003849029541015625, -0.0157928466796875, 0.0198974609375, 0.001529693603515625, -0.0116119384765625, -0.0021514892578125, -0.04327392578125, 0.0018062591552734375, 0.0010509490966796875, -0.0005970001220703125, 0.027801513671875, -0.0027446746826171875, -0.0095977783203125, 0.005962371826171875, -0.024169921875, 0.0085296630859375, 0.018157958984375, -0.02178955078125, -0.010345458984375, -0.0382080078125, -0.0941162109375, -0.0213165283203125, -0.045501708984375, -0.0009083747863769531, 0.0088043212890625, -0.00018012523651123047, 0.05084228515625, -0.0002319812774658203, 0.04296875, 0.00406646728515625, -0.044219970703125, -0.005565643310546875, -0.0007405281066894531, -0.004009246826171875, 0.0467529296875, -0.01824951171875, -0.06536865234375, 0.04296875, -0.010345458984375, 0.01263427734375, -0.016815185546875, -0.001041412353515625, -0.007659912109375, -0.0161895751953125, -0.04168701171875, -0.04833984375, 0.00044417381286621094, -0.01279449462890625, -0.00440216064453125, -0.0306396484375, 0.0238494873046875, -0.028900146484375, -0.042022705078125, 0.0257415771484375, 0.0017862319946289062, -0.056549072265625, 0.01319122314453125, -0.00627899169921875, 0.016510009765625, 0.009124755859375, 0.0227508544921875, -0.005329132080078125, 0.044219970703125, -0.015716552734375, 0.039794921875, 0.04327392578125, -0.0065155029296875, -0.0020046234130859375, 0.03143310546875, 0.0285797119140625, 0.0002899169921875, -0.04833984375, -0.004917144775390625, -0.0435791015625, -0.02716064453125, -0.011688232421875, -0.08087158203125, -0.0175323486328125, 0.0726318359375, 0.025909423828125, -0.0225830078125, 0.0236968994140625, 0.067626953125, 0.0249481201171875, 0.00762176513671875, -0.00635528564453125, -0.04296875, 0.013427734375, -0.029693603515625, -0.01366424560546875, -0.0413818359375, 0.00860595703125, 0.057159423828125, -0.0236968994140625, -0.01776123046875, 0.0322265625, -0.00983428955078125, 0.0273284912109375, 0.08148193359375, 0.0013523101806640625, -0.07012939453125, 0.05560302734375, 0.031890869140625, 0.005016326904296875, -0.0140533447265625, 0.01263427734375, -0.007305145263671875, 0.047393798828125, -0.07611083984375, -0.0079345703125, -0.017608642578125, 0.0222625732421875, -0.01326751708984375, -0.025421142578125, 0.025115966796875, 0.01326751708984375, -0.006160736083984375, -0.03759765625, 0.0013427734375, 0.0161895751953125, 0.0022602081298828125, -0.0007600784301757812, 0.0311126708984375, -0.016510009765625, 0.0650634765625, -0.022430419921875, -0.035369873046875, -0.0175323486328125, -0.0249481201171875, 0.0210113525390625, -0.009674072265625, -0.01397705078125, 0.00864410400390625, -0.0489501953125, 0.03521728515625, 0.037261962890625, 0.0165863037109375, 0.004283905029296875, -0.0255889892578125, -0.01334381103515625, 0.0227508544921875, 0.03143310546875, 0.01800537109375, 0.002368927001953125, 0.04168701171875, -0.0252685546875, 0.058135986328125, -0.0019445419311523438, -0.005725860595703125, 0.01097869873046875, -0.038543701171875, 0.033477783203125, -0.04107666015625, 0.0019931793212890625, 0.0285797119140625, -0.033966064453125, -0.0255889892578125, -0.0022907257080078125, -0.002704620361328125, 0.016815185546875, 0.00412750244140625, -0.0360107421875, -0.003612518310546875, -0.034423828125, -0.0266876220703125, 0.01145172119140625, 0.03759765625, 0.0238494873046875, -0.097900390625, 0.05242919921875, 0.040130615234375, 0.05401611328125, 0.0382080078125, 0.004680633544921875, 0.0140533447265625, 0.0040283203125, 0.003692626953125, 0.01192474365234375, 0.01065826416015625, 0.035858154296875, 0.0171356201171875, 0.00258636474609375, -0.04296875, 0.01934814453125, -0.003238677978515625, -0.040740966796875, 0.0135040283203125, 0.044219970703125, 0.0093994140625, 0.017059326171875, 0.0042266845703125, -0.00742340087890625, -0.036651611328125, 0.03521728515625, -0.003021240234375, -0.052764892578125, 0.02178955078125, -0.0230560302734375, 0.0364990234375, -0.01192474365234375, 0.072021484375, -0.042633056640625, 0.0007944107055664062, -0.0074615478515625, 0.023223876953125, -0.009124755859375, 0.01152801513671875, -0.01326751708984375, 0.03253173828125, 0.03631591796875, 0.0276336669921875, 0.0322265625, 0.032073974609375, -0.0682373046875, -0.020538330078125, 0.010345458984375, 0.00228118896484375, 0.05084228515625, -0.0284271240234375, -0.0012340545654296875, 0.040130615234375, 0.010894775390625, 0.054962158203125, 0.0266876220703125, 0.0184783935546875, 0.0169830322265625, -0.0017080307006835938, 0.00049591064453125, -0.010345458984375], index=1)
    # ]
    print(len(embeddings_batch_response.data[0].embedding))
    # 1024


def test_rag(client: Mistral) -> None:
    with open('data/paul_graham_essay.txt', 'r') as opened:
        text = opened.read()

    chunk_size = 2048
    chunks = [text[i:i + chunk_size] for i in range(0, len(text), chunk_size)]
    print(len(chunks))

    def get_text_embeddings(inputs):
        response = client.embeddings.create(model="mistral-embed", inputs=inputs)
        return np.array([data.embedding for data in response.data])

    text_embeddings = get_text_embeddings(chunks)
    print('text_embeddings', text_embeddings)

    d = text_embeddings.shape[1]
    index = faiss.IndexFlatL2(d)
    index.add(text_embeddings)

    question = "What were the two main things the author worked on before college?"
    question_embeddings = get_text_embeddings([question])
    print('question_embeddings', question_embeddings)

    D, I = index.search(question_embeddings, k=2)  # distance, index
    retrieved_chunk = [chunks[i] for i in I.tolist()[0]]
    print('retrieved_chunk', retrieved_chunk)

    prompt = f"""
    Context information is below.
    ---------------------
    {retrieved_chunk}
    ---------------------
    Given the context information and not prior knowledge, answer the query.
    Query: {question}
    Answer:
    """

    messages = [{"role": "user", "content": prompt}]
    chat_response = client.chat.complete(
        model="mistral-medium-latest",
        messages=messages
    )
    print('chat_response', chat_response)



def main():
    api_key = os.environ.get("MISTRAL_API_KEY")

    with Mistral(api_key=api_key) as client:
        # test_agent(client)
        # test_agent_conversation(client)
        # test_chat(client)
        # test_classify(client)
        # test_embeddings(client)
        test_rag(client)


if __name__ == "__main__":
    main()
